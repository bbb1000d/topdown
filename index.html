<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Wanderlight - Cozy Action Roguelike</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="game-root">
      <canvas
        id="game"
        width="960"
        height="640"
        aria-label="Top-down adventure canvas"
      ></canvas>

      <section class="hud hud--primary" aria-live="polite">
        <h1 class="hud-title">Wanderlight</h1>
        <p class="hud-subtitle">
          Explore the valley towns, brave the dungeons, and help rebuild the world.
          Move with WASD, aim with the arrow keys, dash with E, shoot with Space,
          interact with F to speak, trade, or open chests, and open the menu with Escape.
        </p>
        <div class="hud-bars">
          <div class="meter" role="presentation">
            <header class="meter-header">
              <span>Health</span>
              <span id="health-value">100 / 100</span>
            </header>
            <div
              class="meter-track"
              role="progressbar"
              aria-label="Player health"
              aria-valuemin="0"
              aria-valuemax="100"
              aria-valuenow="100"
            >
              <div class="meter-fill meter-fill--health" data-health-fill></div>
            </div>
          </div>
          <div class="meter" role="presentation">
            <header class="meter-header">
              <span>Experience</span>
              <span id="xp-value">Level 1</span>
            </header>
            <div
              class="meter-track"
              role="progressbar"
              aria-label="Experience toward next level"
              aria-valuemin="0"
              aria-valuemax="100"
              aria-valuenow="0"
            >
              <div class="meter-fill meter-fill--xp" data-progress-fill></div>
            </div>
          </div>
        </div>
        <div class="hud-inline">
          <span>Skill Sparks:</span>
          <span id="skill-points" class="hud-value">0</span>
        </div>
        <div class="hud-inline">
          <span>Gold:</span>
          <span id="currency" class="hud-value">0</span>
        </div>
        <div class="hud-inline">
          <span>Current Goal:</span>
          <span id="current-goal" class="hud-value">Find the sunstone altar</span>
        </div>
        <div class="hud-inline">
          <span>Region:</span>
          <span id="zone-label" class="hud-value">Aurora Plaza</span>
        </div>
        <div class="hud-inline hud-inline--time" aria-live="polite">
          <span>Time:</span>
          <span id="time-of-day" class="hud-value">Golden Noon</span>
        </div>
        <div class="meter meter--small" role="presentation">
          <header class="meter-header">
            <span>Town Project</span>
            <span id="town-progress-label">Village Hearth</span>
          </header>
          <div
            class="meter-track"
            role="progressbar"
            aria-label="Town construction progress"
            aria-valuemin="0"
            aria-valuemax="100"
            aria-valuenow="0"
          >
            <div class="meter-fill meter-fill--town" data-town-fill></div>
          </div>
        </div>
      </section>

      <aside class="hud hud--secondary" aria-label="Progression panels">
        <section class="panel" aria-labelledby="upgrades-heading">
          <h2 id="upgrades-heading">Equipped Upgrades</h2>
          <ul id="skills" class="list" aria-live="polite"></ul>
        </section>
        <section class="panel" aria-labelledby="inventory-heading">
          <h2 id="inventory-heading">Satchel</h2>
          <ul id="inventory" class="list" aria-live="polite"></ul>
        </section>
        <section class="panel" aria-labelledby="achievements-heading">
          <h2 id="achievements-heading">Achievements</h2>
          <ul id="achievements" class="list" aria-live="polite"></ul>
        </section>
        <section class="panel" aria-labelledby="log-heading">
          <h2 id="log-heading">Moments</h2>
          <ul id="log" class="list list--log" aria-live="polite"></ul>
        </section>
      </aside>

      <section class="hud hud--map" aria-label="World markers">
        <h2>Map Clues</h2>
        <ul id="map-info" class="list"></ul>
        <section class="panel panel--story" aria-labelledby="story-heading">
          <h2 id="story-heading">Story</h2>
          <p id="storyline" class="storyline" aria-live="polite">
            Arrive in the valley and kindle hope in the towns.
          </p>
          <ul id="npc-journal" class="list list--journal" aria-live="polite"></ul>
        </section>
      </section>

      <div id="start-menu" class="overlay overlay--start" aria-hidden="false">
        <div class="overlay-card" role="dialog" aria-modal="true" aria-label="Start menu">
          <h2>Welcome back, wanderer</h2>
          <p>
            Radiant Hearth now anchors a sprawling valley filled with four bustling towns,
            hidden dungeons, and treasure-filled chests. Gather your courage and set out.
          </p>
          <div class="overlay-actions">
            <button id="play-button" class="button">Play</button>
          </div>
          <div class="overlay-footer">
            <p>Highlights</p>
            <ul>
              <li>Open chests with <strong>F</strong> to claim powerful gear.</li>
              <li>Defeat foes for gold and restorative elixirs.</li>
              <li>Visit your home plot in Radiant Hearth to continue building.</li>
            </ul>
          </div>
        </div>
      </div>

      <div id="pause-menu" class="overlay overlay--menu" aria-hidden="true">
        <div class="overlay-card" role="dialog" aria-modal="true" aria-label="Game menu">
          <h2>Paused</h2>
          <p>Take a breather, wanderer.</p>
          <div class="overlay-actions">
            <button id="resume-button" class="button">Resume</button>
            <button id="restart-button" class="button button--ghost">Start Over</button>
          </div>
          <div class="overlay-footer">
            <p>Controls</p>
            <ul>
              <li>Move: WASD</li>
              <li>Aim: Arrow Keys</li>
              <li>Shoot: Space</li>
              <li>Dash: E</li>
              <li>Interact &amp; Open Chests: F</li>
              <li>Menu: Escape</li>
            </ul>
          </div>
        </div>
      </div>

      <div id="levelup-overlay" class="overlay overlay--choices" aria-hidden="true">
        <div class="overlay-card" role="dialog" aria-modal="true" aria-label="Upgrade selection">
          <h2>Choose an Upgrade</h2>
          <p>Select one spark to reshape your abilities.</p>
          <div id="upgrade-options" class="upgrade-grid"></div>
          <button id="skip-upgrade" class="button button--ghost">Skip (keep points)</button>
        </div>
      </div>

      <div id="shop-overlay" class="overlay overlay--choices" aria-hidden="true">
        <div class="overlay-card" role="dialog" aria-modal="true" aria-label="Town shop">
          <h2 id="shop-name">Aurora Market</h2>
          <p id="shop-description">Trade glow shards for helpful gear.</p>
          <div id="shop-options" class="upgrade-grid"></div>
          <button id="leave-shop" class="button button--ghost">Leave Shop</button>
        </div>
      </div>

      <div id="toast" role="status" aria-live="assertive" class="toast hidden"></div>
      <div id="prompt" class="prompt" aria-live="polite"></div>
    </main>
    <script type="module" src="src/main.js"></script>
  </body>
</html>
